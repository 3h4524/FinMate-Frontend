<!-- chatbot-iframe.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/chatbot.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.7/dist/purify.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="/assets/js/chatbot.js"></script>
</head>

<body>
    <div id="chatbot-container" class="fixed bottom-6 right-6 z-[1000]">
        <!-- Chatbot Toggle Button -->
        <button id="chatbot-toggle"
            class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 focus:outline-none sm:bottom-4 sm:right-4">
            <i class="fas fa-comment-alt text-xl"></i>
        </button>

        <!-- Chatbot Modal -->
        <div id="chatbot-modal"
            class="m-10 hidden fixed bottom-20 right-6 w-96 max-w-[90vw] h-[80vh] sm:h-[70vh] md:h-[60vh] bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col transform transition-all duration-300 sm:bottom-0 sm:right-0 sm:rounded-b-none">
            <!-- Chat Header -->
            <div class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 p-4 text-white shrink-0">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center">
                            <i class="fas fa-robot text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold">FinMate Assistant</h3>
                            <p class="text-xs opacity-80">Your financial helper</p>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button id="chatbot-reset" class="text-white hover:text-gray-200 focus:outline-none">
                            <i class="fas fa-trash text-lg"></i>
                        </button>
                        <button id="chatbot-close" class="text-white hover:text-gray-200 focus:outline-none">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Chat Messages -->
            <div id="chatbot-messages"
                class="flex-1 max-h-[calc(80vh-120px)] sm:max-h-[calc(70vh-120px)] md:max-h-[calc(60vh-120px)] p-4 overflow-y-auto bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 space-y-4">
                <div class="chat-message bot-message mb-3 flex justify-start">
                    <div class="flex items-start space-x-2">
                        <div class="w-8 h-8 rounded-full bg-indigo-200 flex items-center justify-center">
                            <i class="fas fa-robot text-indigo-600 text-sm"></i>
                        </div>
                        <div class="rounded-2xl p-3 text-sm shadow-sm message-content max-w-[80%]"
                            style="background: white; color: #1f2937;">
                            Hello! How can I assist you with your finances today?
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <form id="chatbot-form" class="p-4 bg-white border-t border-gray-200 shrink-0">
                <div class="flex space-x-2">
                    <input type="text" id="chatbot-input"
                        class="flex-1 px-4 py-2 rounded-2xl border border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 focus:outline-none text-sm placeholder-gray-400"
                        placeholder="Ask anything..." required>
                    <button type="submit"
                        class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl px-4 py-2 hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 focus:outline-none">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', initializeChatbot);
    </script>
</body>

</html>